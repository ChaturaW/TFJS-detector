{"version":3,"sources":["logo.svg","Components/CocoSsdDetector.js","App.js","reportWebVitals.js","index.js"],"names":["CocoSsdDetector","useState","isShowVideo","setIsShowVideo","faVideoSlash","videoIcon","setVideoIcon","message","setMessage","webcamRef","useRef","canvasRef","refreshIntervalId","undefined","detect","model","a","current","video","readyState","width","videoWidth","height","videoHeight","console","log","detections","canv","getContext","drawBoundingBox","forEach","prediction","x","y","text","strokeStyle","font","fillStyle","beginPath","rect","fillText","stroke","onClick","clearInterval","stream","getTracks","track","stop","faVideo","className","icon","size","color","cocoSsd","then","mdl","setInterval","faBrain","audio","ref","videoConstraints","facingMode","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8TAAe,I,mGCsGAA,MA/Ff,WAA4B,IAAD,EAEeC,oBAAS,GAFxB,mBAEhBC,EAFgB,KAEHC,EAFG,OAGWF,mBAASG,KAHpB,mBAGhBC,EAHgB,KAGLC,EAHK,OAIOL,mBAAS,IAJhB,mBAIhBM,EAJgB,KAIPC,EAJO,KAKjBC,EAAYC,iBAAO,MACnBC,EAAYD,iBAAO,MAErBE,OAAoBC,EAiClBC,EAAM,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,0DACNP,EAAUQ,SACgC,IAAvCR,EAAUQ,QAAQC,MAAMC,WAFrB,wBAGDD,EAAQT,EAAUQ,QAAQC,MAEhCP,EAAUM,QAAQG,MAAQF,EAAMG,WAChCV,EAAUM,QAAQK,OAASJ,EAAMK,YAEjCC,QAAQC,IAAI,eARL,SASkBV,EAAMD,OAAOI,GAT/B,OASDQ,EATC,OAUPF,QAAQC,IAAIC,GAENC,EAAOhB,EAAUM,QAAQW,WAAW,MAC1CC,EAAgBH,EAAYC,GAbrB,4CAAH,sDAiBNE,EAAkB,SAACH,EAAYC,GACjCD,EAAWI,SAAQ,SAAAC,GAAe,IAAD,cACCA,EAAU,KADX,GACtBC,EADsB,KACnBC,EADmB,KAChBb,EADgB,KACTE,EADS,KAEvBY,EAAOH,EAAU,MAGvBJ,EAAKQ,YADS,MAEdR,EAAKS,KAAO,aACZT,EAAKU,UAHS,MAKdV,EAAKW,YACLX,EAAKY,KAAKP,EAAGC,EAAGb,EAAOE,GACvBK,EAAKU,UAAY,QACjBV,EAAKa,SAASN,EAAMF,EAAGC,EAAI,IAC3BN,EAAKc,SAELjC,EAAW,QAInB,OACI,gCACI,wBAAQkC,QArDE,WACVxC,GACAyC,cAAc/B,GACCH,EAAUQ,QAAQ2B,OAAOC,YACjCf,SAAQ,SAAAgB,GAAK,OAAIA,EAAMC,UAC9B5C,GAAe,GACfG,EAAa0C,OAEbxC,EAAW,uBACXL,GAAe,GACfG,EAAaF,OA2Ce6C,UAAU,eAAtC,SAAqD,cAAC,IAAD,CAAiBC,KAAM7C,EAAW8C,KAAK,KAAKC,MAAM,cACvG,wBAAQV,QAvEO,WACfxC,IACAM,EAAW,gCACX6C,SAAeC,MAAK,SAAAvC,GAChB,IAAMwC,EAAMxC,EAEZH,EAAoB4C,aAAY,WAC5B1C,EAAOyC,KACR,SA+D0BN,UAAU,eAA3C,SAA0D,cAAC,IAAD,CAAiBC,KAAMO,IAASN,KAAK,KAAKC,MAAM,cAC1G,4BAAI7C,IACJ,qBAAK0C,UAAU,aAAf,SACK/C,GACG,sBAAK+C,UAAU,UAAf,UACI,8BAAK,cAAC,IAAD,CAAQS,OAAO,EAAOC,IAAKlD,EAAWmD,iBA/DtC,CACrBC,WAAY,eA8DmFZ,UAAU,aACzF,8BAAK,wBAAQU,IAAKhD,EAAWsC,UAAU,sBClFhDa,MARf,WACE,OACE,qBAAKb,UAAU,MAAf,SACE,cAAC,EAAD,OCKSc,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBX,MAAK,YAAkD,IAA/CY,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.ff22ac48.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { useEffect, useRef, useState } from 'react';\nimport Webcam from 'react-webcam';\nimport * as tf from '@tensorflow/tfjs';\nimport * as cocoSsd from '@tensorflow-models/coco-ssd';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faVideo, faVideoSlash, faBrain } from '@fortawesome/free-solid-svg-icons';\n\nfunction CocoSsdDetector() {\n\n    const [isShowVideo, setIsShowVideo] = useState(true);\n    const [videoIcon, setVideoIcon] = useState(faVideoSlash);\n    const [message, setMessage] = useState(\"\");\n    const webcamRef = useRef(null);\n    const canvasRef = useRef(null);\n\n    let refreshIntervalId = undefined;\n\n    const startDetection = () => {\n        if (isShowVideo) {\n            setMessage(\"Loading model. Please wait..\")\n            cocoSsd.load().then(model => {\n                const mdl = model;\n\n                refreshIntervalId = setInterval(() => {\n                    detect(mdl);\n                }, 10);\n            });\n        }\n    }\n\n    const videoConstraints = {\n        facingMode: \"environment\"\n    }\n\n    const toggleCam = () => {\n        if (isShowVideo) {\n            clearInterval(refreshIntervalId);\n            const tracks = webcamRef.current.stream.getTracks();\n            tracks.forEach(track => track.stop());\n            setIsShowVideo(false);\n            setVideoIcon(faVideo);\n        } else {\n            setMessage(\"Turning on webcam..\")\n            setIsShowVideo(true);\n            setVideoIcon(faVideoSlash);\n        }\n    }\n\n    const detect = async (model) => {\n        if ((webcamRef.current)\n            && (webcamRef.current.video.readyState === 4)) {\n            const video = webcamRef.current.video;\n\n            canvasRef.current.width = video.videoWidth;\n            canvasRef.current.height = video.videoHeight;\n\n            console.log(\"detecting..\")\n            const detections = await model.detect(video);\n            console.log(detections);\n\n            const canv = canvasRef.current.getContext(\"2d\");\n            drawBoundingBox(detections, canv);\n        }\n    };\n\n    const drawBoundingBox = (detections, canv) => {\n        detections.forEach(prediction => {\n            const [x, y, width, height] = prediction[\"bbox\"];\n            const text = prediction[\"class\"];\n\n            const color = \"red\";\n            canv.strokeStyle = color;\n            canv.font = \"24px Arial\";\n            canv.fillStyle = color;\n\n            canv.beginPath();\n            canv.rect(x, y, width, height);\n            canv.fillStyle = \"white\";\n            canv.fillText(text, x, y - 10);\n            canv.stroke();\n\n            setMessage(\"\");\n        })\n    }\n\n    return (\n        <div>\n            <button onClick={toggleCam} className=\"webcamButton\"><FontAwesomeIcon icon={videoIcon} size=\"3x\" color=\"#464866\" /></button>\n            <button onClick={startDetection} className=\"detectButton\"><FontAwesomeIcon icon={faBrain} size=\"3x\" color=\"#2E9CCA\" /></button>\n            <p>{message}</p>\n            <div className=\"bottomView\">\n                {isShowVideo &&\n                    <div className=\"camView\">\n                        <div><Webcam audio={false} ref={webcamRef} videoConstraints={videoConstraints} className=\"webcam\" /></div>\n                        <div><canvas ref={canvasRef} className=\"canvas\" /></div>\n                    </div>\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default CocoSsdDetector;","import logo from './logo.svg';\nimport './App.css';\nimport CocoSsdDetector from './Components/CocoSsdDetector';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <CocoSsdDetector />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}